‚∏ª

üìà ATR-Sigma RVOL Strategy

A modular Python framework to analyze and visualize stock data using Average True Range (ATR) and Relative Volume (RVOL) indicators.
The project is organized into distinct components for configuration, data acquisition, processing, visualization, and image stitching.

‚∏ª

üìÇ Project Structure

config.py ‚Äî Central Settings

Holds all knobs/paths used everywhere (single source of truth).
	‚Ä¢	STOCK_TICKER (e.g., "VOO")
	‚Ä¢	FIGURE_PATH ‚Üí folder where individual charts/PNGs are saved
	‚Ä¢	REPORT_PATH ‚Üí folder where stitched/composite images go
	‚Ä¢	Daily knobs: DAILY_DATE_RANGE, DAILY_ROLLING_WINDOW, ATR_DAILY_ROLLING_WINDOW
	‚Ä¢	Intraday knobs: INTRADAY_ROLLING_WINDOW, SHOW_N_DAYS
	‚Ä¢	Data paths: e.g., INTRADAY_FILEPATH if you save derived CSVs for hourly bars

‚∏ª

download_data.py ‚Äî Get Raw Market Data

Responsible for fetching daily and intraday bars (from your vendor/API).
	‚Ä¢	Fetches daily & intraday data
	‚Ä¢	Normalizes column names
	‚Ä¢	Writes to:
	‚Ä¢	./data/{TICKER}_daily.csv
	‚Ä¢	./data/{TICKER}_{interval}.csv

Helpers:
	‚Ä¢	fetch_data_to_csv(ticker, interval="1d"|"60min"|"15min"|...)
	‚Ä¢	Optional CLI via if __name__ == "__main__":

Output: CSV files in ./data/ for downstream processing.

‚∏ª

daily_handler.py ‚Äî Daily Data Processing

Cleans raw daily data and builds features for plotting.
	‚Ä¢	daily_data_handler(ticker, daterange) ‚Üí returns DataFrame with tz-aware index
	‚Ä¢	daily_data_feature(df, feature) ‚Üí extracts features (close, volume, etc.)
	‚Ä¢	daily_data_rvol(df, look_back_days) ‚Üí computes daily RVOL
	‚Ä¢	daily_data_atr(df, lookback) ‚Üí computes ATR (True Range rolling mean)

Output: DataFrames for close, volume, RVOL, and ATR.

‚∏ª

daily_viz.py ‚Äî Daily Charts

Generates daily PNG charts (saved to FIGURE_PATH) with standardized names.
	‚Ä¢	Daily close:
	‚Ä¢	VOO_daily_close_30.png
	‚Ä¢	VOO_daily_close_60.png
	‚Ä¢	VOO_daily_close_90.png
	‚Ä¢	Daily volume: VOO_daily_volume_30.png, ‚Ä¶
	‚Ä¢	Daily RVOL: VOO_daily_rvol_30.png, ‚Ä¶
	‚Ä¢	Daily ATR: VOO_daily_atr_30.png, ‚Ä¶

Output: PNG charts for each daily feature.

‚∏ª

intraday_handler.py ‚Äî Intraday Data Processing

Processes intraday (hourly/15min/30min) CSVs.
	‚Ä¢	Builds time-of-day pivots
	‚Ä¢	Computes intraday RVOL curves vs. historical average
	‚Ä¢	Computes time-of-day averages for close & volume (lookbacks: 5, 10, 20 days)

Output: DataFrames for:
	‚Ä¢	average close by time
	‚Ä¢	average volume by time
	‚Ä¢	last SHOW_N_DAYS intraday RVOL lines

‚∏ª

intraday_viz.py ‚Äî Intraday Charts

Creates intraday PNG charts (saved to FIGURE_PATH).
	‚Ä¢	Average close:
	‚Ä¢	VOO_intraday_average_close_5_days_look_back.png
	‚Ä¢	VOO_intraday_average_close_10_days_look_back.png
	‚Ä¢	VOO_intraday_average_close_20_days_look_back.png
	‚Ä¢	Average volume:
	‚Ä¢	VOO_intraday_average_volume_5_days_look_back.png (also 10/20)
	‚Ä¢	Intraday RVOL (last N days, varying lookback):
	‚Ä¢	VOO_intraday_rvol_last_10_days_with_5_day_lookback.png
	‚Ä¢	VOO_intraday_rvol_last_10_days_with_10_day_lookback.png
	‚Ä¢	VOO_intraday_rvol_last_10_days_with_20_day_lookback.png

Output: Intraday PNG charts.

‚∏ª

image_stack_patch.py ‚Äî Image Stitcher

Discovers related PNGs and stitches period variants vertically into composites.

Recognized families:
	1.	Daily:

{TICKER}_daily_{feature}_{period}.png
‚Üí VOO_daily_close_30-60-90.png


	2.	Intraday averages (close/volume):

{TICKER}_intraday_average_close_{period}_days_look_back.png
‚Üí VOO_intraday_average_close_5-10-20.png


	3.	Intraday RVOL:

{TICKER}_intraday_rvol_last_{show}_days_with_{period}_day_lookback.png
‚Üí VOO_intraday_rvol_last_10_days_with_lookback_5-10-20.png



Output: stitched composites saved in REPORT_PATH.

‚∏ª

‚ñ∂Ô∏è Usage

Run the full pipeline (example with test.py):
	1.	Download daily & intraday data to CSV
	2.	Process daily data and generate daily charts
	3.	Process intraday data and generate intraday charts
	4.	Stitch charts into composites for review

python test.py

	‚Ä¢	Individual PNGs ‚Üí FIGURE_PATH
	‚Ä¢	Stitched composites ‚Üí REPORT_PATH

‚∏ª

üì¶ Dependencies

Requires Python 3.9+ and:
	‚Ä¢	Core
	‚Ä¢	pandas ‚Üí data manipulation
	‚Ä¢	numpy ‚Üí numerical computations
	‚Ä¢	matplotlib ‚Üí plotting
	‚Ä¢	Pillow (PIL) ‚Üí image stitching
	‚Ä¢	re (built-in) ‚Üí regex for filename parsing
	‚Ä¢	pathlib (built-in) ‚Üí filesystem paths
	‚Ä¢	subprocess (built-in, optional for batch running)
	‚Ä¢	Optional
	‚Ä¢	alpha_vantage or other market-data API client

Install via pip:

pip install pandas numpy matplotlib pillow alpha_vantage

Or use a requirements.txt:

pandas
numpy
matplotlib
pillow
alpha_vantage


‚∏ª

‚ú® With this modular setup, you can swap tickers, change lookback windows, or adjust plots by editing just config.py.

‚∏ª